{"ast":null,"code":"import React,{useEffect}from'react';import{Flex}from'@chakra-ui/react';import CreatorDisplay from'./CreatorDisplay';import{useSelector,useDispatch}from'../../reducer';import{getMarketplaceNftsQuery}from'../../reducer/async/queries';export default function Creator(_ref){var minter=_ref.minter;var system=useSelector(function(s){return s.system;});var collections=useSelector(function(s){return s.collections;});var _useSelector=useSelector(function(s){return s.marketplace;}),marketplace=_useSelector.marketplace;var dispatch=useDispatch();// Don't get assets from other contracts for now\n// useEffect(() => {\n//     dispatch(getAssetContractsQuery(minter));\n// }, [system.status, dispatch, minter, collections.globalCollection]);\nuseEffect(function(){dispatch(getMarketplaceNftsQuery(marketplace.address));},[marketplace.address,dispatch]);var creatorsCollections={};if(!!marketplace.tokens){marketplace.tokens.filter(function(token){var _token$token;return(token===null||token===void 0?void 0:(_token$token=token.token)===null||_token$token===void 0?void 0:_token$token.owner)===(minter!==null&&minter!==void 0?minter:system.tzPublicKey);}).map(function(token){var _token$tokenSale,_token$tokenSale$valu,_token$tokenSale$valu2,_token$tokenSale$valu3,_token$tokenSale2,_token$tokenSale2$val,_token$tokenSale2$val2,_token$tokenSale2$val3;creatorsCollections[token===null||token===void 0?void 0:(_token$tokenSale=token.tokenSale)===null||_token$tokenSale===void 0?void 0:(_token$tokenSale$valu=_token$tokenSale.value)===null||_token$tokenSale$valu===void 0?void 0:(_token$tokenSale$valu2=_token$tokenSale$valu.sale_data)===null||_token$tokenSale$valu2===void 0?void 0:(_token$tokenSale$valu3=_token$tokenSale$valu2.sale_token)===null||_token$tokenSale$valu3===void 0?void 0:_token$tokenSale$valu3.fa2_address]=collections.collections[token===null||token===void 0?void 0:(_token$tokenSale2=token.tokenSale)===null||_token$tokenSale2===void 0?void 0:(_token$tokenSale2$val=_token$tokenSale2.value)===null||_token$tokenSale2$val===void 0?void 0:(_token$tokenSale2$val2=_token$tokenSale2$val.sale_data)===null||_token$tokenSale2$val2===void 0?void 0:(_token$tokenSale2$val3=_token$tokenSale2$val2.sale_token)===null||_token$tokenSale2$val3===void 0?void 0:_token$tokenSale2$val3.fa2_address];return null;});}Object.keys(collections.collections).filter(function(key){return collections.collections[key].creator.address===(minter!==null&&minter!==void 0?minter:system.tzPublicKey);}).map(function(addr){creatorsCollections[addr]=collections.collections[addr];return null;});return/*#__PURE__*/React.createElement(Flex,{flex:\"1\",w:\"100%\",minHeight:\"0\",flexDir:{base:'column',md:'row'}},/*#__PURE__*/React.createElement(CreatorDisplay,{minter:minter,collections:creatorsCollections}));}","map":{"version":3,"sources":["/Users/frankenstein/projects/minter/src/components/Creator/index.tsx"],"names":["React","useEffect","Flex","CreatorDisplay","useSelector","useDispatch","getMarketplaceNftsQuery","Creator","minter","system","s","collections","marketplace","dispatch","address","creatorsCollections","tokens","filter","token","owner","tzPublicKey","map","tokenSale","value","sale_data","sale_token","fa2_address","Object","keys","key","creator","addr","base","md"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,eAAzC,CACA,OACEC,uBADF,KAEO,6BAFP,CAKA,cAAe,SAASC,CAAAA,OAAT,MAAiD,IAA9BC,CAAAA,MAA8B,MAA9BA,MAA8B,CAC9D,GAAMC,CAAAA,MAAM,CAAGL,WAAW,CAAC,SAAAM,CAAC,QAAIA,CAAAA,CAAC,CAACD,MAAN,EAAF,CAA1B,CACA,GAAME,CAAAA,WAAW,CAAGP,WAAW,CAAC,SAAAM,CAAC,QAAIA,CAAAA,CAAC,CAACC,WAAN,EAAF,CAA/B,CACA,iBAAwBP,WAAW,CAAC,SAAAM,CAAC,QAAIA,CAAAA,CAAC,CAACE,WAAN,EAAF,CAAnC,CAAQA,WAAR,cAAQA,WAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAEA;AACA;AACA;AACA;AAEAJ,SAAS,CAAC,UAAM,CACdY,QAAQ,CAACP,uBAAuB,CAACM,WAAW,CAACE,OAAb,CAAxB,CAAR,CACD,CAFQ,CAEN,CAACF,WAAW,CAACE,OAAb,CAAsBD,QAAtB,CAFM,CAAT,CAIA,GAAME,CAAAA,mBAAmB,CAAG,EAA5B,CAEA,GAAG,CAAC,CAACH,WAAW,CAACI,MAAjB,CAAyB,CACvBJ,WAAW,CAACI,MAAZ,CACCC,MADD,CAEE,SAAAC,KAAK,yBACH,CAAAA,KAAK,OAAL,EAAAA,KAAK,SAAL,sBAAAA,KAAK,CAAEA,KAAP,oDAAcC,KAAd,KAAyBX,MAAzB,SAAyBA,MAAzB,UAAyBA,MAAzB,CAAmCC,MAAM,CAACW,WAA1C,CADG,EAFP,EAKCC,GALD,CAKK,SAAAH,KAAK,CAAI,gLACZH,mBAAmB,CAACG,KAAD,SAACA,KAAD,mCAACA,KAAK,CAAEI,SAAR,kEAAC,iBAAkBC,KAAnB,wEAAC,sBAAyBC,SAA1B,yEAAC,uBAAoCC,UAArC,iDAAC,uBAAgDC,WAAjD,CAAnB,CAAmFf,WAAW,CAACA,WAAZ,CAAwBO,KAAxB,SAAwBA,KAAxB,oCAAwBA,KAAK,CAAEI,SAA/B,mEAAwB,kBAAkBC,KAA1C,wEAAwB,sBAAyBC,SAAjD,yEAAwB,uBAAoCC,UAA5D,iDAAwB,uBAAgDC,WAAxE,CAAnF,CACA,MAAO,KAAP,CACD,CARD,EASD,CACDC,MAAM,CAACC,IAAP,CAAYjB,WAAW,CAACA,WAAxB,EACGM,MADH,CAEI,SAAAY,GAAG,QACDlB,CAAAA,WAAW,CAACA,WAAZ,CAAwBkB,GAAxB,EAA6BC,OAA7B,CAAqChB,OAArC,IACCN,MADD,SACCA,MADD,UACCA,MADD,CACWC,MAAM,CAACW,WADlB,CADC,EAFP,EAMGC,GANH,CAMO,SAAAU,IAAI,CAAI,CACXhB,mBAAmB,CAACgB,IAAD,CAAnB,CAA4BpB,WAAW,CAACA,WAAZ,CAAwBoB,IAAxB,CAA5B,CACA,MAAO,KAAP,CACD,CATH,EAWA,mBACE,oBAAC,IAAD,EACE,IAAI,CAAC,GADP,CAEE,CAAC,CAAC,MAFJ,CAGE,SAAS,CAAC,GAHZ,CAIE,OAAO,CAAE,CACPC,IAAI,CAAE,QADC,CAEPC,EAAE,CAAE,KAFG,CAJX,eASE,oBAAC,cAAD,EAAgB,MAAM,CAAEzB,MAAxB,CAAgC,WAAW,CAAEO,mBAA7C,EATF,CADF,CAaD","sourcesContent":["import React, { useEffect } from 'react';\nimport { Flex } from '@chakra-ui/react';\nimport CreatorDisplay from './CreatorDisplay';\nimport { useSelector, useDispatch } from '../../reducer';\nimport {\n  getMarketplaceNftsQuery\n} from '../../reducer/async/queries';\nimport { Collection } from '../../reducer/slices/collections';\n\nexport default function Creator({ minter }: { minter: string }) {\n  const system = useSelector(s => s.system);\n  const collections = useSelector(s => s.collections);\n  const { marketplace } = useSelector(s => s.marketplace);\n  const dispatch = useDispatch();\n\n  // Don't get assets from other contracts for now\n  // useEffect(() => {\n  //     dispatch(getAssetContractsQuery(minter));\n  // }, [system.status, dispatch, minter, collections.globalCollection]);\n\n  useEffect(() => {\n    dispatch(getMarketplaceNftsQuery(marketplace.address));\n  }, [marketplace.address, dispatch]);\n\n  const creatorsCollections = {} as { [key: string]: Collection };\n\n  if(!!marketplace.tokens) {\n    marketplace.tokens\n    .filter(\n      token =>\n        token?.token?.owner === (minter ?? system.tzPublicKey)\n    )\n    .map(token => {\n      creatorsCollections[token?.tokenSale?.value?.sale_data?.sale_token?.fa2_address] = collections.collections[token?.tokenSale?.value?.sale_data?.sale_token?.fa2_address];\n      return null;\n    });\n  }\n  Object.keys(collections.collections)\n    .filter(\n      key =>\n        collections.collections[key].creator.address ===\n        (minter ?? system.tzPublicKey)\n    )\n    .map(addr => {\n      creatorsCollections[addr] = collections.collections[addr];\n      return null;\n    });\n\n  return (\n    <Flex\n      flex=\"1\"\n      w=\"100%\"\n      minHeight=\"0\"\n      flexDir={{\n        base: 'column',\n        md: 'row'\n      }}\n    >\n      <CreatorDisplay minter={minter} collections={creatorsCollections} />\n    </Flex>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}