{"ast":null,"code":"import React,{useEffect}from'react';import{Box,Flex,Heading,Link,SimpleGrid,Spinner,Text}from'@chakra-ui/react';import{MinterButton}from'../../common';import{ChevronLeft,ExternalLink,Wind}from'react-feather';import{useDispatch,useSelector}from'../../../reducer';import{getContractNftsQuery,getNftAssetContractQuery}from'../../../reducer/async/queries';import CollectionsDropdown from'./CollectionsDropdown';import TokenCard from'../../common/TokenCard';export default function CollectionDisplay(_ref){var address=_ref.address,_ref$ownedOnly=_ref.ownedOnly,ownedOnly=_ref$ownedOnly===void 0?true:_ref$ownedOnly;var collections=useSelector(function(s){return s.collections;});var _useSelector=useSelector(function(s){return s.system;}),config=_useSelector.config,tzPublicKey=_useSelector.tzPublicKey,wallet=_useSelector.wallet;var dispatch=useDispatch();useEffect(function(){if(address!==null){dispatch(getNftAssetContractQuery(address)).then(function(){return dispatch(getContractNftsQuery(address));});}},[address,dispatch]);if(address===null){return/*#__PURE__*/React.createElement(React.Fragment,null);}var collection=collections.collections[address];if(!collection){return/*#__PURE__*/React.createElement(React.Fragment,null);}if(!collection.loaded){return/*#__PURE__*/React.createElement(Flex,{flexDir:\"column\",align:\"center\",flex:\"1\",pt:20},/*#__PURE__*/React.createElement(Spinner,{size:\"xl\",mb:6,color:\"gray.300\"}),/*#__PURE__*/React.createElement(Heading,{size:\"lg\",textAlign:\"center\",color:\"gray.500\"},\"Loading...\"));}if(collection.tokens===null){return/*#__PURE__*/React.createElement(React.Fragment,null);}var tokens=ownedOnly?collection.tokens.filter(function(_ref2){var owner=_ref2.owner,sale=_ref2.sale;return owner===tzPublicKey||(sale===null||sale===void 0?void 0:sale.seller)===tzPublicKey;}):collection.tokens;if(tokens.length===0){return/*#__PURE__*/React.createElement(Flex,{w:\"100%\",flex:\"1\",flexDir:\"column\",align:\"center\"},/*#__PURE__*/React.createElement(Flex,{px:20,py:10,bg:\"gray.200\",textAlign:\"center\",align:\"center\",borderRadius:\"5px\",flexDir:\"column\",fontSize:\"xl\",color:\"gray.400\",mt:28},/*#__PURE__*/React.createElement(Wind,null),/*#__PURE__*/React.createElement(Text,{fontWeight:\"600\",pt:5},ownedOnly?'No owned tokens to display in this collection':'No tokens to display in this collection')));}return/*#__PURE__*/React.createElement(Flex,{flexDir:\"column\",h:\"100%\",w:\"100%\",flex:\"1\",bg:\"brand.brightGray\",borderLeftWidth:\"1px\",borderLeftColor:\"brand.lightBlue\",overflowY:\"scroll\",justify:\"start\"},/*#__PURE__*/React.createElement(Flex,{flexDir:\"row\"},/*#__PURE__*/React.createElement(Flex,{justifyContent:\"flex-start\",width:\"4rem\"},/*#__PURE__*/React.createElement(MinterButton,{variant:\"primaryActionInverted\",onClick:function onClick(e){e.preventDefault();window.history.back();}},/*#__PURE__*/React.createElement(Box,{color:\"currentcolor\"},/*#__PURE__*/React.createElement(ChevronLeft,{size:24,strokeWidth:\"3\"})))),/*#__PURE__*/React.createElement(Flex,{flexDir:\"column\",px:{base:6,md:10},pt:6,overflow:\"hidden\"},ownedOnly&&wallet!==null?/*#__PURE__*/React.createElement(Flex,{display:{base:'flex',md:'none'},mb:4},/*#__PURE__*/React.createElement(CollectionsDropdown,null)):null,/*#__PURE__*/React.createElement(Flex,{w:\"100%\",pb:6,justify:\"space-between\",align:{base:'flex-start',md:'center'},flexDir:{base:'column',md:'row'}},/*#__PURE__*/React.createElement(Flex,{flexDir:\"column\",width:\"100%\"},/*#__PURE__*/React.createElement(Flex,{justify:\"space-between\",width:\"100%\"},/*#__PURE__*/React.createElement(Heading,{size:\"lg\"},collection.metadata.name||'')),/*#__PURE__*/React.createElement(Flex,{align:\"center\"},/*#__PURE__*/React.createElement(Text,{fontFamily:\"mono\",color:\"brand.lightGray\",overflow:\"hidden\",textOverflow:\"ellipsis\",overflowWrap:\"normal\"},collection.address),/*#__PURE__*/React.createElement(Link,{href:\"\".concat(config.bcd.gui,\"/\").concat(config.network,\"/\").concat(collection.address),color:\"brand.darkGray\",isExternal:true,ml:2},/*#__PURE__*/React.createElement(ExternalLink,{size:16})))),/*#__PURE__*/React.createElement(MinterButton,{display:{base:'none',md:'flex'},variant:\"primaryActionInverted\",onClick:function onClick(){var selectedCollection=collections.selectedCollection;if(selectedCollection!==null){dispatch(getContractNftsQuery(selectedCollection));}},mt:{base:4,md:0}})))),/*#__PURE__*/React.createElement(SimpleGrid,{columns:{sm:1,md:2,lg:3,xl:4},gap:8,px:{base:6,md:10},pb:8},tokens.map(function(token){return/*#__PURE__*/React.createElement(TokenCard,Object.assign({key:address+token.id,address:address,config:config},token));})));}","map":{"version":3,"sources":["/Users/frankenstein/projects/minter/src/components/Collections/Catalog/CollectionDisplay.tsx"],"names":["React","useEffect","Box","Flex","Heading","Link","SimpleGrid","Spinner","Text","MinterButton","ChevronLeft","ExternalLink","Wind","useDispatch","useSelector","getContractNftsQuery","getNftAssetContractQuery","CollectionsDropdown","TokenCard","CollectionDisplay","address","ownedOnly","collections","s","system","config","tzPublicKey","wallet","dispatch","then","collection","loaded","tokens","filter","owner","sale","seller","length","e","preventDefault","window","history","back","base","md","metadata","name","bcd","gui","network","selectedCollection","sm","lg","xl","map","token","id"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport {\n  Box,\n  Flex,\n  Heading,\n  Link,\n  SimpleGrid,\n  Spinner,\n  Text\n} from '@chakra-ui/react';\nimport { MinterButton } from '../../common';\nimport { ChevronLeft, ExternalLink, Wind } from 'react-feather';\nimport { useDispatch, useSelector } from '../../../reducer';\nimport {\n  getContractNftsQuery,\n  getNftAssetContractQuery\n} from '../../../reducer/async/queries';\nimport CollectionsDropdown from './CollectionsDropdown';\nimport TokenCard from '../../common/TokenCard';\n\ninterface CollectionDisplayProps {\n  address: string | null;\n  ownedOnly?: boolean;\n}\n\nexport default function CollectionDisplay({\n  address,\n  ownedOnly = true\n}: CollectionDisplayProps) {\n  const collections = useSelector(s => s.collections);\n  const { config, tzPublicKey, wallet } = useSelector(s => s.system);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (address !== null) {\n      dispatch(getNftAssetContractQuery(address)).then(() =>\n        dispatch(getContractNftsQuery(address))\n      );\n    }\n  }, [address, dispatch]);\n\n  if (address === null) {\n    return <></>;\n  }\n\n  const collection = collections.collections[address];\n\n  if (!collection) {\n    return <></>;\n  }\n\n  if (!collection.loaded) {\n    return (\n      <Flex flexDir=\"column\" align=\"center\" flex=\"1\" pt={20}>\n        <Spinner size=\"xl\" mb={6} color=\"gray.300\" />\n        <Heading size=\"lg\" textAlign=\"center\" color=\"gray.500\">\n          Loading...\n        </Heading>\n      </Flex>\n    );\n  }\n\n  if (collection.tokens === null) {\n    return <></>;\n  }\n\n  const tokens = ownedOnly\n    ? collection.tokens.filter(\n        ({ owner, sale }) =>\n          owner === tzPublicKey || sale?.seller === tzPublicKey\n      )\n    : collection.tokens;\n\n  if (tokens.length === 0) {\n    return (\n      <Flex w=\"100%\" flex=\"1\" flexDir=\"column\" align=\"center\">\n        <Flex\n          px={20}\n          py={10}\n          bg=\"gray.200\"\n          textAlign=\"center\"\n          align=\"center\"\n          borderRadius=\"5px\"\n          flexDir=\"column\"\n          fontSize=\"xl\"\n          color=\"gray.400\"\n          mt={28}\n        >\n          <Wind />\n          <Text fontWeight=\"600\" pt={5}>\n            {ownedOnly\n              ? 'No owned tokens to display in this collection'\n              : 'No tokens to display in this collection'}\n          </Text>\n        </Flex>\n      </Flex>\n    );\n  }\n\n  return (\n    <Flex\n      flexDir=\"column\"\n      h=\"100%\"\n      w=\"100%\"\n      flex=\"1\"\n      bg=\"brand.brightGray\"\n      borderLeftWidth=\"1px\"\n      borderLeftColor=\"brand.lightBlue\"\n      overflowY=\"scroll\"\n      justify=\"start\"\n    >\n      <Flex flexDir=\"row\">\n        <Flex justifyContent=\"flex-start\" width=\"4rem\">\n          <MinterButton\n            variant=\"primaryActionInverted\"\n            onClick={e => {\n              e.preventDefault();\n              window.history.back();\n            }}\n          >\n            <Box color=\"currentcolor\">\n              <ChevronLeft size={24} strokeWidth=\"3\" />\n            </Box>\n          </MinterButton>\n        </Flex>\n\n        <Flex\n            flexDir=\"column\"\n            px={{ base: 6, md: 10 }}\n            pt={6}\n            overflow=\"hidden\"\n        >\n          {ownedOnly && wallet !== null ? (\n            <Flex display={{ base: 'flex', md: 'none' }} mb={4}>\n              <CollectionsDropdown />\n            </Flex>\n          ) : null}\n          <Flex\n            w=\"100%\"\n            pb={6}\n            justify=\"space-between\"\n            align={{\n              base: 'flex-start',\n              md: 'center'\n            }}\n            flexDir={{\n              base: 'column',\n              md: 'row'\n            }}\n          >\n            <Flex flexDir=\"column\" width=\"100%\">\n              <Flex justify=\"space-between\" width=\"100%\">\n                <Heading size=\"lg\">{collection.metadata.name || ''}</Heading>\n              </Flex>\n              <Flex align=\"center\">\n                <Text \n                  fontFamily=\"mono\" \n                  color=\"brand.lightGray\"\n                  overflow=\"hidden\"\n                  textOverflow=\"ellipsis\"\n                  overflowWrap=\"normal\"\n                >\n                  {collection.address}\n                </Text>\n                <Link\n                  href={`${config.bcd.gui}/${config.network}/${collection.address}`}\n                  color=\"brand.darkGray\"\n                  isExternal\n                  ml={2}\n                >\n                  <ExternalLink size={16} />\n                </Link>\n              </Flex>\n            </Flex>\n            <MinterButton\n              display={{ base: 'none', md: 'flex' }}\n              variant=\"primaryActionInverted\"\n              onClick={() => {\n                const selectedCollection = collections.selectedCollection;\n                if (selectedCollection !== null) {\n                  dispatch(getContractNftsQuery(selectedCollection));\n                }\n              }}\n              mt={{\n                base: 4,\n                md: 0\n              }}\n            ></MinterButton>\n          </Flex>\n        </Flex>\n      </Flex>\n      <SimpleGrid columns={{ sm: 1, md: 2, lg: 3, xl: 4 }} gap={8} px={{ base: 6, md: 10 }} pb={8}>\n        {tokens.map(token => {\n          return (\n            <TokenCard\n              key={address + token.id}\n              address={address}\n              config={config}\n              {...token}\n            />\n          );\n        })}\n      </SimpleGrid>\n    </Flex>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}