{"ast":null,"code":"import _regeneratorRuntime from \"/Users/frankenstein/projects/minter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { generateGUID } from '../../utils/generate-uuid';\nimport { Logger } from '../../utils/Logger';\nimport { isAndroid, isIOS } from '../../utils/platform';\nimport { closeAlerts } from './Alert';\nimport { Pairing } from './Pairing';\nvar logger = new Logger('Alert');\nexport var preparePairingAlert = function preparePairingAlert(shadowRoot, pairingPayload) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n    var info, container, buttonListWrapper, qr, copyButton, titleEl, platform, mainText, walletList, switchButton, fn, showPlatform, showQr, switchPlatform, platformSwitch;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return Pairing.getPairingInfo(pairingPayload, function () {\n              return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return closeAlerts();\n\n                      case 2:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n            });\n\n          case 2:\n            info = _context7.sent;\n            container = shadowRoot.getElementById(\"pairing-container\");\n\n            if (container) {\n              _context7.next = 6;\n              break;\n            }\n\n            throw new Error('container not found');\n\n          case 6:\n            buttonListWrapper = document.createElement('span');\n            container.appendChild(buttonListWrapper);\n            info.buttons.forEach(function (button) {\n              return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n                var randomId, x, el, buttonEl;\n                return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                  while (1) {\n                    switch (_context3.prev = _context3.next) {\n                      case 0:\n                        _context3.next = 2;\n                        return generateGUID();\n\n                      case 2:\n                        randomId = _context3.sent;\n                        x = \"\\n    <div class=\\\"beacon-list__title\\\">\".concat(button.title, \"</div>\\n\\t\\t<button class=\\\"beacon-modal__button connect__btn\\\">\").concat(button.text, \"</button>\\n\\t\\t \");\n                        el = document.createElement('a');\n                        el.id = \"button_\".concat(randomId);\n                        el.innerHTML = x;\n                        buttonListWrapper.appendChild(el);\n                        buttonEl = shadowRoot.getElementById(el.id);\n\n                        if (buttonEl) {\n                          buttonEl.addEventListener('click', function () {\n                            return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                              return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                                while (1) {\n                                  switch (_context2.prev = _context2.next) {\n                                    case 0:\n                                      button.clickHandler();\n\n                                    case 1:\n                                    case \"end\":\n                                      return _context2.stop();\n                                  }\n                                }\n                              }, _callee2);\n                            }));\n                          });\n                        }\n\n                      case 10:\n                      case \"end\":\n                        return _context3.stop();\n                    }\n                  }\n                }, _callee3);\n              }));\n            });\n            info.walletLists.forEach(function (list) {\n              var listWrapperEl = document.createElement('div');\n              container.appendChild(listWrapperEl);\n              var listTitleEl = document.createElement('div');\n              listTitleEl.classList.add('beacon-list__title');\n              listTitleEl.innerHTML = list.title;\n              listWrapperEl.appendChild(listTitleEl);\n              var listEl = document.createElement('span');\n              listWrapperEl.appendChild(listEl);\n              list.wallets.forEach(function (wallet) {\n                return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n                  var altTag, randomId, x, el, walletEl;\n                  return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n                    while (1) {\n                      switch (_context6.prev = _context6.next) {\n                        case 0:\n                          altTag = \"Open in \".concat(wallet.name);\n                          _context6.next = 3;\n                          return generateGUID();\n\n                        case 3:\n                          randomId = _context6.sent;\n                          x = \"\\n\\t\\t\\t<a tabindex=\\\"0\\\" alt=\\\"\".concat(altTag, \"\\\" id=\\\"wallet_\").concat(randomId, \"\\\"\\n\\t\\t\\t target=\\\"_blank\\\" class=\\\"beacon-selection__list\").concat(wallet.enabled ? '' : ' disabled', \"\\\">\\n\\t\\t\\t <div class=\\\"beacon-selection__name\\\">\").concat(wallet.name, \"\\n\\t\\t\\t \").concat(wallet.enabled ? '' : '<p>Not installed</p>', \"\\n\\t\\t\\t </div>\\n\\t\\t\\t \").concat(wallet.logo ? \"<div>\\n\\t\\t\\t <img class=\\\"beacon-selection__img\\\" src=\\\"\".concat(wallet.logo, \"\\\"/>\\n\\t\\t\\t </div>\") : '<svg class=\"beacon-selection__img\" aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"wallet\" class=\"svg-inline--fa fa-wallet fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" style=\"enable-background:new 0 0 512 512;\" xml:space=\"preserve\"><path d=\"M376.2,181H152.9c-5.2,0-9.4-4.2-9.4-9.4s4.2-9.4,9.4-9.4h225c5.2,0,9.4-4.2,9.4-9.4c0-15.5-12.6-28.1-28.1-28.1H143.5c-20.7,0-37.5,16.8-37.5,37.5v187.5c0,20.7,16.8,37.5,37.5,37.5h232.7c16.4,0,29.8-12.6,29.8-28.1v-150C406,193.6,392.7,181,376.2,181z M349.8,302.9c-10.4,0-18.8-8.4-18.8-18.8s8.4-18.8,18.8-18.8s18.8,8.4,18.8,18.8S360.1,302.9,349.8,302.9z\"/></svg>', \"\\n\\t\\t\\t</a>\\n\\t\\t\\t \");\n                          el = document.createElement('span');\n                          el.innerHTML = x;\n                          listEl.appendChild(el);\n                          walletEl = shadowRoot.getElementById(\"wallet_\".concat(randomId));\n\n                          if (walletEl) {\n                            walletEl.addEventListener('click', function () {\n                              return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n                                return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                                  while (1) {\n                                    switch (_context4.prev = _context4.next) {\n                                      case 0:\n                                        wallet.clickHandler();\n\n                                      case 1:\n                                      case \"end\":\n                                        return _context4.stop();\n                                    }\n                                  }\n                                }, _callee4);\n                              }));\n                            });\n                            walletEl.addEventListener('keydown', function (event) {\n                              return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n                                return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                                  while (1) {\n                                    switch (_context5.prev = _context5.next) {\n                                      case 0:\n                                        if (event.key === 'Enter') {\n                                          wallet.clickHandler();\n                                        }\n\n                                      case 1:\n                                      case \"end\":\n                                        return _context5.stop();\n                                    }\n                                  }\n                                }, _callee5);\n                              }));\n                            });\n                          }\n\n                        case 10:\n                        case \"end\":\n                          return _context6.stop();\n                      }\n                    }\n                  }, _callee6);\n                }));\n              });\n            });\n            qr = shadowRoot.getElementById(\"beacon--qr__container\");\n            copyButton = shadowRoot.getElementById(\"beacon--qr__copy\");\n            titleEl = shadowRoot.getElementById(\"beacon-title\");\n            platform = isAndroid(window) ? 'android' : isIOS(window) ? 'ios' : 'desktop';\n            mainText = shadowRoot.getElementById(\"beacon-main-text\");\n            walletList = shadowRoot.getElementById(\"pairing-container\");\n            switchButton = shadowRoot.getElementById(\"beacon--switch__container\");\n\n            if (mainText && walletList && switchButton && copyButton && qr && titleEl) {\n              fn = function fn() {\n                navigator.clipboard.writeText(pairingPayload ? pairingPayload.p2pSyncCode : '').then(function () {\n                  copyButton.innerText = 'Copied';\n                  logger.log('Copying to clipboard was successful!');\n                }, function (err) {\n                  logger.error('Could not copy text to clipboard: ', err);\n                });\n              };\n\n              copyButton.addEventListener('click', fn);\n              qr.addEventListener('click', fn);\n\n              showPlatform = function showPlatform(type) {\n                var platformSwitch = shadowRoot.getElementById(\"beacon-switch\");\n\n                if (platformSwitch) {\n                  platformSwitch.innerHTML = type === 'none' ? 'Pair Wallet on same device' : 'Pair Wallet on different device';\n                }\n\n                mainText.style.display = 'none';\n                titleEl.style.textAlign = 'center';\n                walletList.style.display = 'none';\n                switchButton.style.display = 'initial';\n\n                switch (type) {\n                  case 'ios':\n                    walletList.style.display = 'initial';\n                    break;\n\n                  case 'android':\n                    walletList.style.display = 'initial';\n                    break;\n\n                  case 'desktop':\n                    walletList.style.display = 'initial';\n                    titleEl.style.textAlign = 'left';\n                    mainText.style.display = 'initial';\n                    switchButton.style.display = 'none';\n                    break;\n\n                  default:\n                    // QR code\n                    mainText.style.display = 'initial';\n                }\n              };\n\n              showQr = false;\n\n              switchPlatform = function switchPlatform() {\n                showPlatform(showQr ? 'none' : platform);\n                showQr = !showQr;\n              };\n\n              switchPlatform();\n              {\n                platformSwitch = shadowRoot.getElementById(\"beacon-switch\");\n\n                if (platformSwitch) {\n                  platformSwitch.addEventListener('click', switchPlatform);\n                }\n              }\n            }\n\n          case 18:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n};","map":{"version":3,"sources":["../../../../src/ui/alert/PairingAlert.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,SAAS,YAAT,QAA6B,2BAA7B;AACA,SAAS,MAAT,QAAuB,oBAAvB;AACA,SAAS,SAAT,EAAoB,KAApB,QAAiC,sBAAjC;AACA,SAAS,WAAT,QAA4B,SAA5B;AACA,SAAS,OAAT,QAAwB,WAAxB;AAEA,IAAM,MAAM,GAAG,IAAI,MAAJ,CAAW,OAAX,CAAf;AAEA,OAAO,IAAM,mBAAmB,GAAG,SAAtB,mBAAsB,CACjC,UADiC,EAEjC,cAFiC;AAAA,SAOhB,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,wCAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACJ,mBAAM,OAAO,CAAC,cAAR,CAAuB,cAAvB,EAAuC;AAAA,qBAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,wCAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACnE,+BAAM,WAAW,EAAjB;;AADmE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAA,EAAX;AAAA,aAAvC,CAAN;;AADI;AACX,YAAA,IADW;AAKX,YAAA,SALW,GAKC,UAAU,CAAC,cAAX,qBALD;;AAAA,gBAMZ,SANY;AAAA;AAAA;AAAA;;AAAA,kBAOT,IAAI,KAAJ,CAAU,qBAAV,CAPS;;AAAA;AAUX,YAAA,iBAVW,GAUS,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAVT;AAWjB,YAAA,SAAS,CAAC,WAAV,CAAsB,iBAAtB;AAEA,YAAA,IAAI,CAAC,OAAL,CAAa,OAAb,CAAqB,UAAO,MAAP;AAAA,qBAAiB,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,wCAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACnB,+BAAM,YAAY,EAAlB;;AADmB;AAC9B,wBAAA,QAD8B;AAG9B,wBAAA,CAH8B,qDAIF,MAAM,CAAC,KAJL,6EAKc,MAAM,CAAC,IALrB;AAQ9B,wBAAA,EAR8B,GAQzB,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CARyB;AASpC,wBAAA,EAAE,CAAC,EAAH,oBAAkB,QAAlB;AACA,wBAAA,EAAE,CAAC,SAAH,GAAe,CAAf;AAEA,wBAAA,iBAAiB,CAAC,WAAlB,CAA8B,EAA9B;AAEM,wBAAA,QAd8B,GAcnB,UAAU,CAAC,cAAX,CAA0B,EAAE,CAAC,EAA7B,CAdmB;;AAgBpC,4BAAI,QAAJ,EAAc;AACZ,0BAAA,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC;AAAA,mCAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,wCAAA;AAAA;AAAA;AAAA;AAAA;AAC5C,sCAAA,MAAM,CAAC,YAAP;;AAD4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAA,EAAX;AAAA,2BAAnC;AAGD;;AApBmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAA,EAAjB;AAAA,aAArB;AAuBA,YAAA,IAAI,CAAC,WAAL,CAAiB,OAAjB,CAAyB,UAAC,IAAD,EAAS;AAChC,kBAAM,aAAa,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAtB;AACA,cAAA,SAAS,CAAC,WAAV,CAAsB,aAAtB;AAEA,kBAAM,WAAW,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAApB;AACA,cAAA,WAAW,CAAC,SAAZ,CAAsB,GAAtB,CAA0B,oBAA1B;AACA,cAAA,WAAW,CAAC,SAAZ,GAAwB,IAAI,CAAC,KAA7B;AACA,cAAA,aAAa,CAAC,WAAd,CAA0B,WAA1B;AAEA,kBAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAf;AACA,cAAA,aAAa,CAAC,WAAd,CAA0B,MAA1B;AAEA,cAAA,IAAI,CAAC,OAAL,CAAa,OAAb,CAAqB,UAAO,MAAP;AAAA,uBAAiB,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,wCAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAC9B,0BAAA,MAD8B,qBACV,MAAM,CAAC,IADG;AAAA;AAEnB,iCAAM,YAAY,EAAlB;;AAFmB;AAE9B,0BAAA,QAF8B;AAG9B,0BAAA,CAH8B,6CAIhB,MAJgB,4BAIM,QAJN,wEAKS,MAAM,CAAC,OAAP,GAAiB,EAAjB,GAAsB,WAL/B,+DAMA,MAAM,CAAC,IANP,sBAOpC,MAAM,CAAC,OAAP,GAAiB,EAAjB,GAAsB,sBAPc,qCAUjC,MAAM,CAAC,IAAP,sEAEqC,MAAM,CAAC,IAF5C,2BAII,yoBAd6B;AAmB9B,0BAAA,EAnB8B,GAmBzB,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAnByB;AAoBpC,0BAAA,EAAE,CAAC,SAAH,GAAe,CAAf;AAEA,0BAAA,MAAM,CAAC,WAAP,CAAmB,EAAnB;AAEM,0BAAA,QAxB8B,GAwBnB,UAAU,CAAC,cAAX,kBAAoC,QAApC,EAxBmB;;AA0BpC,8BAAI,QAAJ,EAAc;AACZ,4BAAA,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC;AAAA,qCAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,wCAAA;AAAA;AAAA;AAAA;AAAA;AAC5C,wCAAA,MAAM,CAAC,YAAP;;AAD4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAA,EAAX;AAAA,6BAAnC;AAGA,4BAAA,QAAQ,CAAC,gBAAT,CAA0B,SAA1B,EAAqC,UAAO,KAAP;AAAA,qCAAgB,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,wCAAA;AAAA;AAAA;AAAA;AAAA;AACnD,4CAAI,KAAK,CAAC,GAAN,KAAc,OAAlB,EAA2B;AACzB,0CAAA,MAAM,CAAC,YAAP;AACD;;AAHkD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAA,EAAhB;AAAA,6BAArC;AAKD;;AAnCmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAA,EAAjB;AAAA,eAArB;AAqCD,aAjDD;AAmDM,YAAA,EAvFW,GAuFc,UAAU,CAAC,cAAX,yBAvFd;AAwFX,YAAA,UAxFW,GAwFsB,UAAU,CAAC,cAAX,oBAxFtB;AAyFX,YAAA,OAzFW,GAyFmB,UAAU,CAAC,cAAX,gBAzFnB;AA2FX,YAAA,QA3FW,GA2FA,SAAS,CAAC,MAAD,CAAT,GAAoB,SAApB,GAAgC,KAAK,CAAC,MAAD,CAAL,GAAgB,KAAhB,GAAwB,SA3FxD;AA6FX,YAAA,QA7FW,GA6FoB,UAAU,CAAC,cAAX,oBA7FpB;AA8FX,YAAA,UA9FW,GA8FsB,UAAU,CAAC,cAAX,qBA9FtB;AAgGX,YAAA,YAhGW,GAgGwB,UAAU,CAAC,cAAX,6BAhGxB;;AAkGjB,gBAAI,QAAQ,IAAI,UAAZ,IAA0B,YAA1B,IAA0C,UAA1C,IAAwD,EAAxD,IAA8D,OAAlE,EAA2E;AACnE,cAAA,EADmE,GAC9D,SAAL,EAAK,GAAK;AACd,gBAAA,SAAS,CAAC,SAAV,CAAoB,SAApB,CAA8B,cAAc,GAAG,cAAc,CAAC,WAAlB,GAAgC,EAA5E,EAAgF,IAAhF,CACE,YAAK;AACH,kBAAA,UAAU,CAAC,SAAX,GAAuB,QAAvB;AACA,kBAAA,MAAM,CAAC,GAAP,CAAW,sCAAX;AACD,iBAJH,EAKE,UAAC,GAAD,EAAQ;AACN,kBAAA,MAAM,CAAC,KAAP,CAAa,oCAAb,EAAmD,GAAnD;AACD,iBAPH;AASD,eAXwE;;AAYzE,cAAA,UAAU,CAAC,gBAAX,CAA4B,OAA5B,EAAqC,EAArC;AACA,cAAA,EAAE,CAAC,gBAAH,CAAoB,OAApB,EAA6B,EAA7B;;AAEM,cAAA,YAfmE,GAepD,SAAf,YAAe,CAAC,IAAD,EAAuD;AAC1E,oBAAM,cAAc,GAAuB,UAAU,CAAC,cAAX,iBAA3C;;AACA,oBAAI,cAAJ,EAAoB;AAClB,kBAAA,cAAc,CAAC,SAAf,GACE,IAAI,KAAK,MAAT,GAAkB,4BAAlB,GAAiD,iCADnD;AAED;;AAED,gBAAA,QAAQ,CAAC,KAAT,CAAe,OAAf,GAAyB,MAAzB;AACA,gBAAA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,QAA1B;AACA,gBAAA,UAAU,CAAC,KAAX,CAAiB,OAAjB,GAA2B,MAA3B;AACA,gBAAA,YAAY,CAAC,KAAb,CAAmB,OAAnB,GAA6B,SAA7B;;AAEA,wBAAQ,IAAR;AACE,uBAAK,KAAL;AACE,oBAAA,UAAU,CAAC,KAAX,CAAiB,OAAjB,GAA2B,SAA3B;AACA;;AACF,uBAAK,SAAL;AACE,oBAAA,UAAU,CAAC,KAAX,CAAiB,OAAjB,GAA2B,SAA3B;AACA;;AACF,uBAAK,SAAL;AACE,oBAAA,UAAU,CAAC,KAAX,CAAiB,OAAjB,GAA2B,SAA3B;AACA,oBAAA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,MAA1B;AACA,oBAAA,QAAQ,CAAC,KAAT,CAAe,OAAf,GAAyB,SAAzB;AACA,oBAAA,YAAY,CAAC,KAAb,CAAmB,OAAnB,GAA6B,MAA7B;AACA;;AACF;AACE;AACA,oBAAA,QAAQ,CAAC,KAAT,CAAe,OAAf,GAAyB,SAAzB;AAfJ;AAiBD,eA5CwE;;AA8CrE,cAAA,MA9CqE,GA8C5D,KA9C4D;;AAgDnE,cAAA,cAhDmE,GAgDlD,SAAjB,cAAiB,GAAW;AAChC,gBAAA,YAAY,CAAC,MAAM,GAAG,MAAH,GAAY,QAAnB,CAAZ;AACA,gBAAA,MAAM,GAAG,CAAC,MAAV;AACD,eAnDwE;;AAqDzE,cAAA,cAAc;AAEd;AACQ,gBAAA,cADR,GAC6C,UAAU,CAAC,cAAX,iBAD7C;;AAEE,oBAAI,cAAJ,EAAoB;AAClB,kBAAA,cAAc,CAAC,gBAAf,CAAgC,OAAhC,EAAyC,cAAzC;AACD;AACF;AACF;;AA/JgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,EAPgB;AAAA,CAA5B","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { generateGUID } from '../../utils/generate-uuid';\nimport { Logger } from '../../utils/Logger';\nimport { isAndroid, isIOS } from '../../utils/platform';\nimport { closeAlerts } from './Alert';\nimport { Pairing } from './Pairing';\nconst logger = new Logger('Alert');\nexport const preparePairingAlert = (shadowRoot, pairingPayload) => __awaiter(void 0, void 0, void 0, function* () {\n    const info = yield Pairing.getPairingInfo(pairingPayload, () => __awaiter(void 0, void 0, void 0, function* () {\n        yield closeAlerts();\n    }));\n    const container = shadowRoot.getElementById(`pairing-container`);\n    if (!container) {\n        throw new Error('container not found');\n    }\n    const buttonListWrapper = document.createElement('span');\n    container.appendChild(buttonListWrapper);\n    info.buttons.forEach((button) => __awaiter(void 0, void 0, void 0, function* () {\n        const randomId = yield generateGUID();\n        const x = `\n    <div class=\"beacon-list__title\">${button.title}</div>\n\t\t<button class=\"beacon-modal__button connect__btn\">${button.text}</button>\n\t\t `;\n        const el = document.createElement('a');\n        el.id = `button_${randomId}`;\n        el.innerHTML = x;\n        buttonListWrapper.appendChild(el);\n        const buttonEl = shadowRoot.getElementById(el.id);\n        if (buttonEl) {\n            buttonEl.addEventListener('click', () => __awaiter(void 0, void 0, void 0, function* () {\n                button.clickHandler();\n            }));\n        }\n    }));\n    info.walletLists.forEach((list) => {\n        const listWrapperEl = document.createElement('div');\n        container.appendChild(listWrapperEl);\n        const listTitleEl = document.createElement('div');\n        listTitleEl.classList.add('beacon-list__title');\n        listTitleEl.innerHTML = list.title;\n        listWrapperEl.appendChild(listTitleEl);\n        const listEl = document.createElement('span');\n        listWrapperEl.appendChild(listEl);\n        list.wallets.forEach((wallet) => __awaiter(void 0, void 0, void 0, function* () {\n            const altTag = `Open in ${wallet.name}`;\n            const randomId = yield generateGUID();\n            const x = `\n\t\t\t<a tabindex=\"0\" alt=\"${altTag}\" id=\"wallet_${randomId}\"\n\t\t\t target=\"_blank\" class=\"beacon-selection__list${wallet.enabled ? '' : ' disabled'}\">\n\t\t\t <div class=\"beacon-selection__name\">${wallet.name}\n\t\t\t ${wallet.enabled ? '' : '<p>Not installed</p>'}\n\t\t\t </div>\n\t\t\t ${wallet.logo\n                ? `<div>\n\t\t\t <img class=\"beacon-selection__img\" src=\"${wallet.logo}\"/>\n\t\t\t </div>`\n                : '<svg class=\"beacon-selection__img\" aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"wallet\" class=\"svg-inline--fa fa-wallet fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" style=\"enable-background:new 0 0 512 512;\" xml:space=\"preserve\"><path d=\"M376.2,181H152.9c-5.2,0-9.4-4.2-9.4-9.4s4.2-9.4,9.4-9.4h225c5.2,0,9.4-4.2,9.4-9.4c0-15.5-12.6-28.1-28.1-28.1H143.5c-20.7,0-37.5,16.8-37.5,37.5v187.5c0,20.7,16.8,37.5,37.5,37.5h232.7c16.4,0,29.8-12.6,29.8-28.1v-150C406,193.6,392.7,181,376.2,181z M349.8,302.9c-10.4,0-18.8-8.4-18.8-18.8s8.4-18.8,18.8-18.8s18.8,8.4,18.8,18.8S360.1,302.9,349.8,302.9z\"/></svg>'}\n\t\t\t</a>\n\t\t\t `;\n            const el = document.createElement('span');\n            el.innerHTML = x;\n            listEl.appendChild(el);\n            const walletEl = shadowRoot.getElementById(`wallet_${randomId}`);\n            if (walletEl) {\n                walletEl.addEventListener('click', () => __awaiter(void 0, void 0, void 0, function* () {\n                    wallet.clickHandler();\n                }));\n                walletEl.addEventListener('keydown', (event) => __awaiter(void 0, void 0, void 0, function* () {\n                    if (event.key === 'Enter') {\n                        wallet.clickHandler();\n                    }\n                }));\n            }\n        }));\n    });\n    const qr = shadowRoot.getElementById(`beacon--qr__container`);\n    const copyButton = shadowRoot.getElementById(`beacon--qr__copy`);\n    const titleEl = shadowRoot.getElementById(`beacon-title`);\n    const platform = isAndroid(window) ? 'android' : isIOS(window) ? 'ios' : 'desktop';\n    const mainText = shadowRoot.getElementById(`beacon-main-text`);\n    const walletList = shadowRoot.getElementById(`pairing-container`);\n    const switchButton = shadowRoot.getElementById(`beacon--switch__container`);\n    if (mainText && walletList && switchButton && copyButton && qr && titleEl) {\n        const fn = () => {\n            navigator.clipboard.writeText(pairingPayload ? pairingPayload.p2pSyncCode : '').then(() => {\n                copyButton.innerText = 'Copied';\n                logger.log('Copying to clipboard was successful!');\n            }, (err) => {\n                logger.error('Could not copy text to clipboard: ', err);\n            });\n        };\n        copyButton.addEventListener('click', fn);\n        qr.addEventListener('click', fn);\n        const showPlatform = (type) => {\n            const platformSwitch = shadowRoot.getElementById(`beacon-switch`);\n            if (platformSwitch) {\n                platformSwitch.innerHTML =\n                    type === 'none' ? 'Pair Wallet on same device' : 'Pair Wallet on different device';\n            }\n            mainText.style.display = 'none';\n            titleEl.style.textAlign = 'center';\n            walletList.style.display = 'none';\n            switchButton.style.display = 'initial';\n            switch (type) {\n                case 'ios':\n                    walletList.style.display = 'initial';\n                    break;\n                case 'android':\n                    walletList.style.display = 'initial';\n                    break;\n                case 'desktop':\n                    walletList.style.display = 'initial';\n                    titleEl.style.textAlign = 'left';\n                    mainText.style.display = 'initial';\n                    switchButton.style.display = 'none';\n                    break;\n                default:\n                    // QR code\n                    mainText.style.display = 'initial';\n            }\n        };\n        let showQr = false;\n        const switchPlatform = () => {\n            showPlatform(showQr ? 'none' : platform);\n            showQr = !showQr;\n        };\n        switchPlatform();\n        {\n            const platformSwitch = shadowRoot.getElementById(`beacon-switch`);\n            if (platformSwitch) {\n                platformSwitch.addEventListener('click', switchPlatform);\n            }\n        }\n    }\n});\n//# sourceMappingURL=PairingAlert.js.map"]},"metadata":{},"sourceType":"module"}