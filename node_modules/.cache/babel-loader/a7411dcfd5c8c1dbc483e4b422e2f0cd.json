{"ast":null,"code":"import _regeneratorRuntime from \"/Users/frankenstein/projects/minter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/Users/frankenstein/projects/minter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/frankenstein/projects/minter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { defaultValues } from '../types/storage/StorageKeyReturnDefaults';\n/**\n * @internalapi\n *\n * A storage that can be used in the browser\n */\n\nexport var LocalStorage = /*#__PURE__*/function () {\n  function LocalStorage(prefix) {\n    _classCallCheck(this, LocalStorage);\n\n    this.prefix = prefix;\n  }\n\n  _createClass(LocalStorage, [{\n    key: \"get\",\n    value: function get(key) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var value;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                value = localStorage.getItem(this.getPrefixedKey(key));\n\n                if (value) {\n                  _context.next = 9;\n                  break;\n                }\n\n                if (!(typeof defaultValues[key] === 'object')) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", JSON.parse(JSON.stringify(defaultValues[key])));\n\n              case 6:\n                return _context.abrupt(\"return\", defaultValues[key]);\n\n              case 7:\n                _context.next = 16;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                return _context.abrupt(\"return\", JSON.parse(value));\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](9);\n                return _context.abrupt(\"return\", value);\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[9, 13]]);\n      }));\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(typeof value === 'string')) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", localStorage.setItem(this.getPrefixedKey(key), value));\n\n              case 4:\n                return _context2.abrupt(\"return\", localStorage.setItem(this.getPrefixedKey(key), JSON.stringify(value)));\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(key) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", Promise.resolve(localStorage.removeItem(this.getPrefixedKey(key))));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }, {\n    key: \"getPrefixedKey\",\n    value: function getPrefixedKey(key) {\n      return this.prefix ? \"\".concat(this.prefix, \"-\").concat(key) : key;\n    }\n  }], [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                return _context4.abrupt(\"return\", Promise.resolve(Boolean(typeof window !== 'undefined') && Boolean(window.localStorage)));\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n    }\n  }]);\n\n  return LocalStorage;\n}();","map":{"version":3,"sources":["../../../src/storage/LocalStorage.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAS,aAAT,QAA8B,2CAA9B;AAGA;;;;AAIG;;AACH,WAAa,YAAb;AACE,wBAA6B,MAA7B,EAA4C;AAAA;;AAAf,SAAA,MAAA,GAAA,MAAA;AAAmB;;AADlD;AAAA;AAAA,WAMe,aAA0B,GAA1B,EAAgC;;;;;;;AACrC,gBAAA,K,GAAQ,YAAY,CAAC,OAAb,CAAqB,KAAK,cAAL,CAAoB,GAApB,CAArB,C;;oBACT,K;;;;;sBACC,OAAO,aAAa,CAAC,GAAD,CAApB,KAA8B,Q;;;;;iDACzB,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,SAAL,CAAe,aAAa,CAAC,GAAD,CAA5B,CAAX,C;;;iDAEA,aAAa,CAAC,GAAD,C;;;;;;;;iDAIb,IAAI,CAAC,KAAL,CAAW,KAAX,C;;;;;iDAEA,K;;;;;;;;;AAGZ;AArBH;AAAA;AAAA,WAuBe,aAA0B,GAA1B,EAAkC,KAAlC,EAAgE;;;;;;sBACvE,OAAO,KAAP,KAAiB,Q;;;;;kDACZ,YAAY,CAAC,OAAb,CAAqB,KAAK,cAAL,CAAoB,GAApB,CAArB,EAA+C,KAA/C,C;;;kDAEA,YAAY,CAAC,OAAb,CAAqB,KAAK,cAAL,CAAoB,GAApB,CAArB,EAA+C,IAAI,CAAC,SAAL,CAAe,KAAf,CAA/C,C;;;;;;;;;AAEV;AA7BH;AAAA;AAAA,WA+Be,iBAA6B,GAA7B,EAAmC;;;;;;kDACvC,OAAO,CAAC,OAAR,CAAgB,YAAY,CAAC,UAAb,CAAwB,KAAK,cAAL,CAAoB,GAApB,CAAxB,CAAhB,C;;;;;;;;;AACR;AAjCH;AAAA;AAAA,WAmCU,wBAAe,GAAf,EAA0B;AAChC,aAAO,KAAK,MAAL,aAAiB,KAAK,MAAtB,cAAgC,GAAhC,IAAwC,GAA/C;AACD;AArCH;AAAA;AAAA,WAES,uBAAwB;;;;;;kDACtB,OAAO,CAAC,OAAR,CAAgB,OAAO,CAAC,OAAO,MAAP,KAAkB,WAAnB,CAAP,IAA0C,OAAO,CAAC,MAAM,CAAC,YAAR,CAAjE,C;;;;;;;;;AACR;AAJH;;AAAA;AAAA","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { defaultValues } from '../types/storage/StorageKeyReturnDefaults';\n/**\n * @internalapi\n *\n * A storage that can be used in the browser\n */\nexport class LocalStorage {\n    constructor(prefix) {\n        this.prefix = prefix;\n    }\n    static isSupported() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return Promise.resolve(Boolean(typeof window !== 'undefined') && Boolean(window.localStorage));\n        });\n    }\n    get(key) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const value = localStorage.getItem(this.getPrefixedKey(key));\n            if (!value) {\n                if (typeof defaultValues[key] === 'object') {\n                    return JSON.parse(JSON.stringify(defaultValues[key]));\n                }\n                else {\n                    return defaultValues[key];\n                }\n            }\n            else {\n                try {\n                    return JSON.parse(value);\n                }\n                catch (jsonParseError) {\n                    return value; // TODO: Validate storage\n                }\n            }\n        });\n    }\n    set(key, value) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof value === 'string') {\n                return localStorage.setItem(this.getPrefixedKey(key), value);\n            }\n            else {\n                return localStorage.setItem(this.getPrefixedKey(key), JSON.stringify(value));\n            }\n        });\n    }\n    delete(key) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return Promise.resolve(localStorage.removeItem(this.getPrefixedKey(key)));\n        });\n    }\n    getPrefixedKey(key) {\n        return this.prefix ? `${this.prefix}-${key}` : key;\n    }\n}\n//# sourceMappingURL=LocalStorage.js.map"]},"metadata":{},"sourceType":"module"}