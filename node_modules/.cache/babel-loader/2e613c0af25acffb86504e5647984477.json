{"ast":null,"code":"import React,{useEffect}from'react';import{Text,Flex,Heading,SimpleGrid,Spinner,Box}from'@chakra-ui/react';import{Wind}from'react-feather';import{useSelector,useDispatch}from'../../../reducer';import{getMarketplaceNftsQuery,loadMoreMarketplaceNftsQuery}from'../../../reducer/async/queries';import TokenCard from'../../common/TokenCard';import FeaturedToken from'./FeaturedToken';import{VisibilityTrigger}from'../../common/VisibilityTrigger';export default function Catalog(){var _state$marketplace$to,_state$marketplace$to2,_state$marketplace$to3;var _useSelector=useSelector(function(s){return s;}),system=_useSelector.system,state=_useSelector.marketplace;var dispatch=useDispatch();useEffect(function(){dispatch(getMarketplaceNftsQuery(state.marketplace.address));},[state.marketplace.address,dispatch]);var loadMore=function loadMore(){dispatch(loadMoreMarketplaceNftsQuery({}));};var tokens=(_state$marketplace$to=(_state$marketplace$to2=state.marketplace.tokens)===null||_state$marketplace$to2===void 0?void 0:_state$marketplace$to2.filter(function(x){return x.token;}).map(function(x){return x.token;}))!==null&&_state$marketplace$to!==void 0?_state$marketplace$to:[];return/*#__PURE__*/React.createElement(Flex,{w:\"100vw\",h:\"100%\",bg:\"brand.brightGray\",px:10,pt:6,overflowY:\"scroll\",justify:\"start\",flexDir:\"column\"},state.marketplace.loaded&&tokens.length>0?/*#__PURE__*/React.createElement(Flex,{width:\"calc(100vw - 5rem)\",justifyContent:\"center\",alignItems:\"center\"},/*#__PURE__*/React.createElement(FeaturedToken,Object.assign({config:system.config},tokens[0]))):null,/*#__PURE__*/React.createElement(Flex,{flex:\"1\",w:\"100%\",flexDir:\"column\"},!state.marketplace.loaded?/*#__PURE__*/React.createElement(Flex,{flexDir:\"column\",align:\"center\",flex:\"1\",pt:20},/*#__PURE__*/React.createElement(Spinner,{size:\"xl\",mb:6,color:\"gray.300\"}),/*#__PURE__*/React.createElement(Heading,{size:\"lg\",textAlign:\"center\",color:\"gray.500\"},\"Loading...\")):tokens.length===0?/*#__PURE__*/React.createElement(Flex,{w:\"100%\",flex:\"1\",flexDir:\"column\",align:\"center\"},/*#__PURE__*/React.createElement(Flex,{px:20,py:10,bg:\"gray.200\",textAlign:\"center\",align:\"center\",borderRadius:\"5px\",flexDir:\"column\",fontSize:\"xl\",color:\"gray.400\",mt:28},/*#__PURE__*/React.createElement(Wind,null),/*#__PURE__*/React.createElement(Text,{fontWeight:\"600\",pt:5},\"No tokens to display in this marketplace\"))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(SimpleGrid,{columns:{sm:1,md:2,lg:3,xl:4},gap:7,pb:8},/*#__PURE__*/React.createElement(React.Fragment,null,tokens.slice(1).map(function(token){return/*#__PURE__*/React.createElement(Box,{display:\"grid\",transition:\"250ms padding\",padding:1,_hover:{padding:0}},/*#__PURE__*/React.createElement(TokenCard,Object.assign({key:\"\".concat(token.address,\"-\").concat(token.id),config:system.config},token)));}),/*#__PURE__*/React.createElement(VisibilityTrigger,{key:((_state$marketplace$to3=state.marketplace.tokens)===null||_state$marketplace$to3===void 0?void 0:_state$marketplace$to3.length)+':'+tokens.length,onVisible:loadMore,allowedDistanceToViewport:600}))))));}","map":{"version":3,"sources":["/Users/frankenstein/projects/minter/src/components/Marketplace/Catalog/index.tsx"],"names":["React","useEffect","Text","Flex","Heading","SimpleGrid","Spinner","Box","Wind","useSelector","useDispatch","getMarketplaceNftsQuery","loadMoreMarketplaceNftsQuery","TokenCard","FeaturedToken","VisibilityTrigger","Catalog","s","system","state","marketplace","dispatch","address","loadMore","tokens","filter","x","token","map","loaded","length","config","sm","md","lg","xl","slice","padding","id"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Text, Flex, Heading, SimpleGrid, Spinner, Box } from '@chakra-ui/react';\nimport { Wind } from 'react-feather';\nimport { useSelector, useDispatch } from '../../../reducer';\nimport {\n  getMarketplaceNftsQuery,\n  loadMoreMarketplaceNftsQuery\n} from '../../../reducer/async/queries';\nimport TokenCard from '../../common/TokenCard';\nimport FeaturedToken from './FeaturedToken';\nimport { VisibilityTrigger } from '../../common/VisibilityTrigger';\n\nexport default function Catalog() {\n  const { system, marketplace: state } = useSelector(s => s);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getMarketplaceNftsQuery(state.marketplace.address));\n  }, [state.marketplace.address, dispatch]);\n\n  const loadMore = () => {\n    dispatch(loadMoreMarketplaceNftsQuery({}));\n  };\n\n  let tokens =\n    state.marketplace.tokens?.filter(x => x.token).map(x => x.token!) ?? [];\n\n  return (\n    <Flex\n      w=\"100vw\"\n      h=\"100%\"\n      bg=\"brand.brightGray\"\n      px={10}\n      pt={6}\n      overflowY=\"scroll\"\n      justify=\"start\"\n      flexDir=\"column\"\n    >\n      {state.marketplace.loaded && tokens.length > 0 ? (\n        <Flex width=\"calc(100vw - 5rem)\" justifyContent=\"center\" alignItems=\"center\">\n          <FeaturedToken config={system.config} {...tokens[0]} />\n        </Flex>\n      ) : null}\n      <Flex\n        flex=\"1\"\n        w=\"100%\"\n        flexDir=\"column\"\n      >\n        {!state.marketplace.loaded ? (\n          <Flex flexDir=\"column\" align=\"center\" flex=\"1\" pt={20}>\n            <Spinner size=\"xl\" mb={6} color=\"gray.300\" />\n            <Heading size=\"lg\" textAlign=\"center\" color=\"gray.500\">\n              Loading...\n              </Heading>\n          </Flex>\n        ) : tokens.length === 0 ? (\n          <Flex w=\"100%\" flex=\"1\" flexDir=\"column\" align=\"center\">\n            <Flex\n              px={20}\n              py={10}\n              bg=\"gray.200\"\n              textAlign=\"center\"\n              align=\"center\"\n              borderRadius=\"5px\"\n              flexDir=\"column\"\n              fontSize=\"xl\"\n              color=\"gray.400\"\n              mt={28}\n            >\n              <Wind />\n              <Text fontWeight=\"600\" pt={5}>\n                No tokens to display in this marketplace\n                </Text>\n            </Flex>\n          </Flex>\n        ) : (\n          <>\n            <SimpleGrid\n              columns={{ sm: 1, md: 2, lg: 3, xl: 4 }}\n              gap={7}\n              pb={8}\n            >\n              <>\n                {tokens.slice(1).map(token => {\n                  return (\n                    <Box display=\"grid\" transition=\"250ms padding\" padding={1} _hover={{padding: 0}}>\n                      <TokenCard\n                        key={`${token.address}-${token.id}`}\n                        config={system.config}\n                        {...token}\n                      />\n                    </Box>\n                  );\n                })}\n                <VisibilityTrigger\n                  key={state.marketplace.tokens?.length + ':' + tokens.length}\n                  onVisible={loadMore}\n                  allowedDistanceToViewport={600}\n                />\n              </>\n            </SimpleGrid>\n          </>\n        )}\n      </Flex>\n    </Flex>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}