{"ast":null,"code":"import _regeneratorRuntime from\"/Users/frankenstein/projects/minter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/Users/frankenstein/projects/minter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/frankenstein/projects/minter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _asyncToGenerator from\"/Users/frankenstein/projects/minter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/frankenstein/projects/minter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import axios from'axios';function mkQueryParams(params){var finalParams=_objectSpread({limit:'10000'},params);return new URLSearchParams(finalParams).toString();}function _getBigMapKeys2(_x,_x2,_x3){return _getBigMapKeys.apply(this,arguments);}export{_getBigMapKeys2 as getBigMapKeys};function _getBigMapKeys(){_getBigMapKeys=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(config,id,params){var uri,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:uri=\"\".concat(config.tzkt.api,\"/v1/bigmaps/\").concat(id,\"/keys?\").concat(mkQueryParams(params));_context.next=3;return axios.get(uri);case 3:response=_context.sent;return _context.abrupt(\"return\",response.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return _getBigMapKeys.apply(this,arguments);}function _getBigMapUpdates2(_x4,_x5){return _getBigMapUpdates.apply(this,arguments);}export{_getBigMapUpdates2 as getBigMapUpdates};function _getBigMapUpdates(){_getBigMapUpdates=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(config,params){var uri,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:uri=\"\".concat(config.tzkt.api,\"/v1/bigmaps/updates?\").concat(mkQueryParams(params));_context2.next=3;return axios.get(uri);case 3:response=_context2.sent;return _context2.abrupt(\"return\",response.data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _getBigMapUpdates.apply(this,arguments);}function _getContracts2(_x6,_x7){return _getContracts.apply(this,arguments);}export{_getContracts2 as getContracts};function _getContracts(){_getContracts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(config,params){var uri,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:uri=\"\".concat(config.tzkt.api,\"/v1/contracts?\").concat(mkQueryParams(params));_context3.next=3;return axios.get(uri);case 3:response=_context3.sent;return _context3.abrupt(\"return\",response.data);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return _getContracts.apply(this,arguments);}function _getContract2(_x8,_x9,_x10){return _getContract.apply(this,arguments);}export{_getContract2 as getContract};function _getContract(){_getContract=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(config,address,params){var uri,response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:uri=\"\".concat(config.tzkt.api,\"/v1/contracts/\").concat(address,\"?\").concat(mkQueryParams(params));_context4.next=3;return axios.get(uri);case 3:response=_context4.sent;return _context4.abrupt(\"return\",response.data);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return _getContract.apply(this,arguments);}function _getContractBigMapKeys2(_x11,_x12,_x13,_x14){return _getContractBigMapKeys.apply(this,arguments);}export{_getContractBigMapKeys2 as getContractBigMapKeys};function _getContractBigMapKeys(){_getContractBigMapKeys=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(config,address,name,params){var uri,response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:uri=\"\".concat(config.tzkt.api,\"/v1/contracts/\").concat(address,\"/bigmaps/\").concat(name,\"/keys?\").concat(mkQueryParams(params));_context5.next=3;return axios.get(uri);case 3:response=_context5.sent;return _context5.abrupt(\"return\",response.data);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return _getContractBigMapKeys.apply(this,arguments);}function _getContractStorage2(_x15,_x16,_x17){return _getContractStorage.apply(this,arguments);}export{_getContractStorage2 as getContractStorage};function _getContractStorage(){_getContractStorage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(config,address,params){var uri,response;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:uri=\"\".concat(config.tzkt.api,\"/v1/contracts/\").concat(address,\"/storage?\").concat(mkQueryParams(params));_context6.next=3;return axios.get(uri);case 3:response=_context6.sent;return _context6.abrupt(\"return\",response.data);case 5:case\"end\":return _context6.stop();}}},_callee6);}));return _getContractStorage.apply(this,arguments);}export var TzKt=/*#__PURE__*/function(){function TzKt(config){_classCallCheck(this,TzKt);this.config=void 0;this.config=config;}_createClass(TzKt,[{key:\"getBigMapKeys\",value:function getBigMapKeys(id,params){return _getBigMapKeys2(this.config,id,params);}},{key:\"getBigMapUpdates\",value:function getBigMapUpdates(params){return _getBigMapUpdates2(this.config,params);}},{key:\"getContracts\",value:function getContracts(params){return _getContracts2(this.config,params);}},{key:\"getContract\",value:function getContract(address,params){return _getContract2(this.config,address,params);}},{key:\"getContractBigMapKeys\",value:function getContractBigMapKeys(address,name,params){return _getContractBigMapKeys2(this.config,address,name,params);}},{key:\"getContractStorage\",value:function getContractStorage(address,params){return _getContractStorage2(this.config,address,params);}}]);return TzKt;}();","map":{"version":3,"sources":["/Users/frankenstein/projects/minter/src/lib/service/tzkt.ts"],"names":["axios","mkQueryParams","params","finalParams","limit","URLSearchParams","toString","getBigMapKeys","config","id","uri","tzkt","api","get","response","data","getBigMapUpdates","getContracts","getContract","address","getContractBigMapKeys","name","getContractStorage","TzKt"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { Config } from '../system';\n\nexport type Params = Record<string, string>;\n\nfunction mkQueryParams(params: Params | undefined) {\n  const finalParams = { limit: '10000', ...params };\n  return new URLSearchParams(finalParams).toString();\n}\n\nexport async function getBigMapKeys(\n  config: Config,\n  id: number,\n  params?: Params\n) {\n  const uri = `${config.tzkt.api}/v1/bigmaps/${id}/keys?${mkQueryParams(\n    params\n  )}`;\n  const response = await axios.get(uri);\n  return response.data;\n}\n\nexport async function getBigMapUpdates(config: Config, params?: Params) {\n  const uri = `${config.tzkt.api}/v1/bigmaps/updates?${mkQueryParams(params)}`;\n  const response = await axios.get(uri);\n  return response.data;\n}\n\nexport async function getContracts(config: Config, params?: Params) {\n  const uri = `${config.tzkt.api}/v1/contracts?${mkQueryParams(params)}`;\n  const response = await axios.get(uri);\n  return response.data;\n}\n\nexport async function getContract(\n  config: Config,\n  address: string,\n  params?: Params\n) {\n  const uri = `${config.tzkt.api}/v1/contracts/${address}?${mkQueryParams(\n    params\n  )}`;\n  const response = await axios.get(uri);\n  return response.data;\n}\n\nexport async function getContractBigMapKeys(\n  config: Config,\n  address: string,\n  name: string,\n  params?: Params\n) {\n  const uri = `${\n    config.tzkt.api\n  }/v1/contracts/${address}/bigmaps/${name}/keys?${mkQueryParams(params)}`;\n  const response = await axios.get(uri);\n  return response.data;\n}\n\nexport async function getContractStorage(\n  config: Config,\n  address: string,\n  params?: Params\n) {\n  const uri = `${\n    config.tzkt.api\n  }/v1/contracts/${address}/storage?${mkQueryParams(params)}`;\n  const response = await axios.get(uri);\n  return response.data;\n}\n\nexport class TzKt {\n  config: Config;\n\n  constructor(config: Config) {\n    this.config = config;\n  }\n\n  getBigMapKeys(id: number, params?: Params) {\n    return getBigMapKeys(this.config, id, params);\n  }\n\n  getBigMapUpdates(params?: Params) {\n    return getBigMapUpdates(this.config, params);\n  }\n\n  getContracts(params?: Params) {\n    return getContracts(this.config, params);\n  }\n\n  getContract(address: string, params?: Params) {\n    return getContract(this.config, address, params);\n  }\n\n  getContractBigMapKeys(address: string, name: string, params?: Params) {\n    return getContractBigMapKeys(this.config, address, name, params);\n  }\n\n  getContractStorage(address: string, params?: Params) {\n    return getContractStorage(this.config, address, params);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}